<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<book lang="sk-SK">
    <bookinfo>
        <title>
URČOVANIE ENTÍT V TEXTE POMOCOU WEBU
        </title>
        <subtitle>Bakalársky projekt</subtitle>
        <author>
            <firstname>Matúš</firstname>
            <surname>Pilňan</surname>
            <affiliation>
                <orgname>Slovenská technická univerzita v Bratislave</orgname>

                <orgdiv role="fakulta">Fakulta informatiky a informačných technológií</orgdiv>
            </affiliation>
        </author>
        <othername role="vedouci">Ing. Miroslav Blšták, PhD.</othername>
        <date remap="dcterms.created">
2018-11-30T11:04:00Z
        </date>
        <date remap="dcterms.modified">
2019-03-04T14:13:00Z
        </date>
        <publishername>
Slovenská technická univerzita v Bratislave
        </publishername>
    </bookinfo>
    <preface>
        <para>
            <inlinemediaobject>
                <imageobject>
                    <imagedata fileref="BP-NER-Pilnan_files/image1.jpeg" contentwidth="601" contentdepth="778"/>
                </imageobject>
            </inlinemediaobject>
        </para>
    </preface>
    <chapter>
        <title>
Určovanie pomenovaných entít
        </title>
        <para>
Určovanie entít v texte je jednou z úloh spracovania prirodzeného jazyka. Podľa entít spomenutých v textoch je možné určiť, čoho sa daný text týka. Náročnosť tejto úlohy, ako aj úspešnosť nástrojov,  závisí od spracovávaného jazyka. Najvyššiu úspešnosť v súčasnosti dosahujú nástroje pre text v angličtine. Automatické určenie entít pomáha pri kategorizácii textov a vyhľadávaní informácií. Taktiež sa používa pri predspracovaní v ďalších úlohách spracovania prirodzeného jazyka, ako je odpovedanie na otázky či strojový preklad. V tejto kapitole analyzujeme problémovú oblasť – zaoberáme sa špecifikami slovenského jazyka a entít zvolenej domény, možnosťami predspracovania textu, metódami používanými v oblasti a existujúcimi nástrojmi pre slovenský a český jazyk.
        </para>
        <section>
            <title>
Slovenský jazyk
            </title>
            <para>
Slovenčina predstavuje, rovnako ako ostatné slovanské jazyky náročný problém pre strojové spracovanie textu. Jedným z hlavných problémov slovenčiny je veľký počet gramatických tvarov, v ktorých sa slovo môže v texte vyskytnúť (pri extrakcii entít nám stačí brať do úvahy len podstatné a prídavné mená, nakoľko len tieto sa vyskytujú v názvoch, no aj tak nám ostáva 6 pádov pre každý z 12 gramatických vzorov pre podstatné mená a pre prídavné mená aj 3 rody pre každý z týchto tvarov). Tento problém je možné riešiť predspracovaním textu, konkrétne lematizáciou alebo stemovaním. Ďalším problémom je skutočnosť, že nie všetky slová tvoriace názov entity sa musia začínať veľkým písmenom, čo môže spôsobovať ťažkosti pri určovaní rozsahu názvu entity. Tento prípad sa týka najmä entít ktoré v názve obsahujú predložku (napríklad obec Žabokreky nad Nitrou). V týchto prípadoch si nemôžeme dovoliť upraviť všetky slová v názve entity na základný tvar, nakoľko nominatív jednotného čísla celého názvu obsahuje aj vyskloňované slovo za predložkou.
            </para>
        </section>
        <section>
            <title>
Geografické názvy
            </title>
            <para>
Samotná doména geografických názvov prináša ďalšie problémy. Jedným z týchto problémov je nejednoznačnosť v názvoch entít rôznych druhov (Zvolen je mesto aj vrch, Nitra je rieka aj mesto a podobne). Ďalším problémom je nejednoznačnosť v rámci kategórie. Toto sa týka najmä názvov vrchov, nakoľko na Slovensku existuje mnoho rôznych vrcholov s rovnakým názvom. (Napríklad Príslop, Malý Javorník). Problém predstavujú aj entity, ktorých názov je zložený z viacerých slov a obsahuje názov inej entity (napríklad z názvu mesta Žiar nad Hronom by sme nemali označiť ako entitu rieku Hron). Niektoré existujúce nástroje však v takýchto prípadoch označia aj celý názov ako jednu entitu, aj časť názvu označujúcu inú entitu 
                <citation>1</citation>.
            </para>
        </section>
        <section>
            <title>
Predspracovanie textu
            </title>
            <para>
Kvôli bohatej morfológii slovenského jazyka je nutné pred pokusom o vyhľadávanie entít analyzovaný text predspracovať. Pri predspracovaní textu v prirodzenom jazyku sa využívajú dva hlavné prístupy: lematizácia a stemovanie. Lematizácia je proces, ktorý z vyskloňovanej formy slova odvodí jeho základný tvar. Tento spôsob predspracovania sa javí užitočný, nakoľko názvy entít môžu byť v texte vyskloňované, no v slovníkoch sa nachádzajú len v základnom tvare a vytvárať slovníky všetkých možných tvarov každého názvu by bolo náročné. Problémom tohto prístupu je skutočnosť, že názvy najmä menej rozšírených entít nemusia byť uvedené v slovníkoch na ktorých sú dostupné nástroje založené a preto ich tieto nástroje nebudú vedieť korektne spracovať. Druhou možnosťou je stemovanie, proces úpravy slova na jeho koreň. Na rozdiel od lematizácie, výsledkom stemovania častokrát nie je celé slovo slovenského jazyka. Pri vyhľadávaní stemovaných slov v slovníkoch by teda bolo nutné brať do úvahy zhodu v koreni slova a akúkoľvek príponu. Keďže rôzne slová môžu mať rovnaký koreň, toto by sa mohlo odraziť na vyššom počte zhôd, z ktorých by neskôr mala byť určená konkrétna entita, čo môže mať vplyv na správnosť výsledku. 
            </para>
        </section>
        <section>
            <title>
Používané metódy
            </title>
            <para>
Metódy rozpoznávania pomenovaných entít používané v existujúcich nástrojoch môžeme vo všeobecnosti rozdeliť na štatistické a lingvistické.  V praxi sa často využíva aj kombinácia týchto dvoch prístupov.
            </para>
            <section>
                <title>
Lingvistické metódy
                </title>
                <para>
Lingvistické metódy sú vhodné pri malom počte rozpoznávaných druhov entít, nakoľko vyžadujú ručné vytvorenie pravidiel ich vyhľadávania. Zložitosť týchto pravidiel zväčša rastie s počtom druhov entít. Pri malom počte druhov entít je však vytvorenie pravidiel spravidla jednoduchšie ako trénovanie štatistického modelu. Lingvistické metódy tiež využívajú slovníky, kontext či regulárne výrazy. Pri využití slovníkov sa spracovaný text porovnáva so slovníkom, v ktorom je pod názvom entity uložený jej typ, alebo sa porovnáva s viacerými slovníkmi, z ktorých každý obsahuje entity toho istého typu. Kontext predstavuje časť textu v bezprostrednom okolí vyhľadávaného názvu. Dá sa predpokladať, že práve niektoré zo slov v tejto časti textu bude určovať, o aký typ entity sa jedná. Regulárne výrazy sú najužitočnejšie pri entitách ako dátum, čas alebo e-mail, nakoľko tieto entity sú zapísané v špecifickom formáte. Je možné ich však využiť aj pri iných druhoch entít, napríklad na nájdenie slov s veľkým začiatočným písmenom alebo častých skratiek (napríklad akademický titul pri osobách). Jednou z nevýhod použitia lingvistických metód môže byť potreba aktualizácie slovníkov, no pri nami zvolených typoch entít tento problém odpadá, keďže obce, rieky a vrchy menia názvy, vznikajú alebo zanikajú len veľmi zriedka. V prípade potreby rozšírenia slovníkov o entity iných krajín je možné využiť mapové dáta.
                </para>
            </section>
            <section>
                <title>
Štatistické metódy
                </title>
                <para>
Štatistické metódy sa zväčša používajú v systémoch s viacerými typmi entít, ktoré sú všeobecnejšie (napríklad lokalita, osoba a pod.) a využívajú metódy strojového učenia. Spravidla sa jedná o učenie s učiteľom, ktoré je pre tento typ úloh najvhodnejšie. Z toho však plynie potreba veľkého množstva anotovaných vstupných dát na správne natrénovanie štatistického modelu. Dostupné systémy pre slovenský jazyk používajú z pohľadu štatistických metód trénovanie metódy výberu 
                    <citation>2</citation>
, alebo hybridnú metódu, pri ktorej sa informácie získané lingvistickou metódou používajú ako črty pri ďalšom spracovaní štatistickým modelom natrénovaným na ručne anotovaných dokumentoch 
                    <citation>3</citation>
. V nástrojoch pre české texty patria medzi používané štatistické metódy podmienené náhodné polia 
                    <citation>45</citation>
, algoritmy podporných vektorov 
                    <citation>6</citation>
 a metóda maximálnej entropie 
                    <citation>78</citation>
. Metóda podmienených náhodných polí je taktiež použitá v jednom z najznámejších nástrojov na rozpoznávanie pomenovaných entít pre anglický jazyk, Stanford NER 
                    <citation>9</citation>
.
                </para>
            </section>
        </section>
        <section>
            <title>
Existujúce nástroje
            </title>
            <para>
V nasledujúcej časti opisujeme existujúce nástroje na extrakciu pomenovaných entít. Pre slovenský jazyk boli v rámci analýzy nájdené tri nástroje, pre český jazyk ich bolo o niečo viac.
            </para>
            <section>
                <title>
Ondrej Kaššák, 2012
                </title>
                <para>
Nástroj na extrakciu pomenovaných entít 
                    <citation>2</citation>
 sa zameriava na rozpoznávanie osôb, lokalít, organizácií, dátumu a času, číselných entít a všeobecných entít, ktoré sa nehodia do žiadnej z týchto kategórií, pričom využíva predovšetkým lingvistické metódy. Predspracovanie vstupného textu je riešené pomocou stemovania. Pri identifikácii entít využíva databázu rozpoznaných entít z textov spracovaných v minulosti, ako aj databázu entít, ktoré už boli v aktuálne spracovávanom texte  identifikované. Neznáme entity vyhľadáva pomocou databázy názvov článkov z Wikipédie so zodpovedajúcimi kategóriami. Na určenie typu entity sa využíva kategória článku, v ktorom sa vyskytla. Vyhľadávanie medzi skôr nájdenými entitami celý proces urýchľuje a rieši problém označovania tej istej entity rôznymi spôsobmi. Okrem databáz sú v tomto nástroji značne využívané aj kontextové slová a regulárne výrazy. Kontextové slová slúžia na overenie typu entity, s ktorou bola nájdená zhoda v niektorej z databáz. Regulárne výrazy sú použité najmä na identifikáciu číselných a dátumových entít, pri ich určovaní sa taktiež využíva rozhodovací strom. Identifikované entity sú ukladané naspäť do databázy, čím sa táto metóda učí. Metóda bola vyhodnocovaná pomocou F-skóre a dosiahla výsledok 85%.
                </para>
            </section>
            <section>
                <title>
Filip Bednárik, 2016
                </title>
                <para>
Nástroj na rozpoznávanie pomenovaných entít 
                    <citation>3</citation>
 rozpoznáva dátumové, časové a číselné údaje, kontaktné a osobné informácie, osoby, firmy, lokality a súdy a je určený predovšetkým pre oblasť justície. Použitú metódu si môže používateľ zvoliť z troch možností: lingvistická, štatistická a hybridná. Pri predspracovaní textu využíva najprv slovníkový lematizátor. V prípade, že pre hľadané slovo lematizátor nedokáže nájsť lemu, použije sa stemer. Pomenované entity potom vyhľadáva na základe slovníkov a regulárnych výrazov. Následne sa zistené typy entít overujú pomocou kontextových slov a iných informácií. Informácie získané týmto lingvistickým postupom následne slúžia ako črty pre klasifikáciu štatistickým modelom. Tento nástroj dosahuje vo svojej doméne priemerné F-skóre 93,8%.
                </para>
            </section>
            <section>
                <title>
NLP4SK
                </title>
                <para>
NLP4SK je súbor nástrojov na spracovanie textu v slovenčine, ktoré je možné použiť ako REST služby
                    <footnote id="__FN1__">
                        <para>
http://arl6.library.sk/nlp4sk/
                        </para>
                    </footnote>
.  Jednou z poskytovaných funkcionalít je aj rozpoznávanie pomenovaných entít. Tento nástroj dokáže rozpoznávať aj typy entít na úrovni, ktorú sme si zvolili pre našu prácu, teda rozlišuje lokality okrem iného aj na obce, vodné plochy a vrchy. Nástroj je založený na slovníkoch. Pokiaľ nájdená entita vyhovuje viacerým typom, vrátia sa všetky. O bližšom fungovaní týchto nástrojov sa nám nepodarilo získať žiadne materiály.
                </para>
            </section>
            <section>
                <title>
Nástroje pre český jazyk
                </title>
                <para>
Pre češtinu existujú systémy na vyššej úrovni, ktoré pokrývajú viac druhov entít a na ich rozpoznávanie využívajú zložitejšie štatistické metódy. V nasledujúcej časti sú tieto nástroje členené podľa metód, ktoré využívajú.
                </para>
                <section>
                    <title>
Podmienené náhodné polia
                    </title>
                    <para>
                        <citation>45</citation>
 využívajú podmienené náhodné polia (conditional random fields). Tie sú reprezentované ako konečný stavový model 
                        <citation>10</citation>
. Pre klasifikáciu využíva postupnosť dát, ktoré majú byť označené – v našom prípade vstupný text, a postupnosť možných značiek. Výhodou CRF oproti iným štatistickým metódam je, že pri klasifikácii jednej entity berie do úvahy aj ostatné entity vyskytujúce sa v texte. Práca 
                        <citation>4</citation>
 sa zameriava predovšetkým na dôležitosť výberu správnych čŕt pre klasifikátor založený na CRF. Autor tieto črty rozdeľuje na jazykovo závislé (hlavné mestá, meny, názvy dní a mesiacov, fyzikálne jednotky a pod.) a nezávislé (slovo a jeho okolie, dĺžka slova, je slovo začiatkom vety? a pod.), pričom jazykovo nezávislé majú na úspešnosť vyšší vplyv. Vytvorený nástroj na rozpoznávanie pomenovaných entít dosiahol najlepšie F-skóre 58,4%.
                    </para>
                    <para>
Nástroj navrhnutý v 
                        <citation>5</citation>
 klasifikuje entity podľa dvojstupňového rozdelenia navrhnutého v 
                        <citation>1</citation>
, známeho ako Czech Named Entity Corpus (CNEC). Pri tomto rozdelení sa vyskytujú entity rovnakej úrovne ako nami zvolené – geografické entity sú jednou z hlavných kategórií rozdelenia, s podkategóriami ako mestá, štáty, vodné plochy a podobne. Tento nástroj preto musí riešiť aj problém zapuzdrenia názvov entít, kedy názov jednej entity obsahuje názov inej (napríklad Žiar nad Hronom – jednou entitou je celý názov označujúci mesto, druhou slovo Hron označujúce rieku). Nástroj v tomto prípade označí ako entity oba názvy. Toto však v našej práci nie je žiadané správanie, nakoľko text v ktorom sa spomína Žiar nad Hronom sa riekou Hron vôbec nemusí zaoberať. Niektoré črty používané pri klasifikácii sú lemy, prípony a predpony slov, slovníky a iné. Tento nástroj dosiahol F-skóre 74,08%
                    </para>
                </section>
                <section>
                    <title>
Metóda maximálnej entropie
                    </title>
                    <para>
Ďalšími nástrojomi vyvinutými pre české texty sú NameTag  
                        <citation>7</citation>
 a 
                        <citation>8</citation>
, ktoré rozpoznávajú entity rovnakých kategórií ako predchádzajúci uvedený nástroj a sú založené na metóde maximálnej entropie. Princíp tejto metódy je ten, že štatistický model má odrážať všetko čo je známe a zároveň nemôže predpokladať nič o neznámom, teda pri dodržaní všetkých známych obmedzení musí byť rozdelenie možných výstupov čo najrovnomernejšie 
                        <citation>11</citation>
. Tento prístup je kombinovaný s metódou sémantických priestorov. V sémantickom priestore tvoria slová jednotlivé body. Vzdialenosť medzi týmito bodmi určuje podobnosť príslušných slov. Nástroj 
                        <citation>8</citation>
 predpokladá, že pokiaľ je slovo podobné s už známou entitou, tak pravdepodobnosť, že toto slovo je entitou rovnakého typu, je vyššia. Iné používané črty sú morfologické vlastnosti slova, lemy, regulárne výrazy či veľkosť začiatočného písmena. Tento nástroj dosiahol F-skóre 72,94%. NameTag využíva okrem metódy maximálnej entropie aj Viterbiho algoritmus
                        <citation>12</citation>
. Celý text analyzuje dvakrát, pričom v druhom behu využíva ako črty výsledky z prvého behu. NameTag dosahuje na českých textoch F-skóre 82,82%
                    </para>
                </section>
                <section>
                    <title>
Algoritmy podporných vektorov
                    </title>
                    <para>
Pre český jazyk taktiež existuje nástroj využívajúci alogoritmy podporných vektorov 
                        <citation>6</citation>
, ktorý pracuje na tej istej skupine typov entít ako predchádzajúce dva uvedené nástroje. Tento prístup využíva reprezentáciu slov ako bodov v priestore. Na základe známych dát je priestor rozdelený priamkou na dve časti tak, aby každá obsahovala len entity jedného typu. Každý z vzniknutých polpriestorov reprezentuje jednu triedu. V prípade že takéto rozdelenie nie je možné, prípustné sú aj entity v nesprávnej kategórii, pri týchto sa musí minimalizovať vzdialenosť od hranice 
                        <citation>13</citation>
. Typ nových entít sa následne určí na základe ich polohy v takto rozdelenom priestore. Črty, ktoré klasifikátor v tomto nástroji používa, zahŕňajú morfologické vlastnosti daného slova, začiatočné písmeno, regulárne výrazy, lemy a kontext. F-skóre tohto nástroja dosahuje 68%.
                    </para>
                </section>
            </section>
            <section>
                <title>
Porovnanie nástrojov
                </title>
                <para>
V praxi sa na vyhodnotenie úspešnosti systémov na rozpoznávanie pomenovaných entít používa metrika F-skóre. F-skóre vyjadruje harmonický priemer presnosti (precision) a úplnosti (recall) systému 
                    <citation>14</citation>
. Precision vyjadruje pomer počtu správne určených entít k celkovému počtu určených entít a recall vyjadruje pomer počtu správne určených entít k celkovému počtu entít ktoré sa v texte vyskytovali 
                    <citation>15</citation>
. Hodnoty F-skóre uvedené pri nástrojoch sú dosiahnuté výsledky uvádzané autormi jednotlivých nástrojov.
                </para>
                <para>
Prvé dva z uvedených nástrojov sa zameriavajú na entity vyššej úrovne ako sú tie, ktoré sme si stanovili v našej práci. Vybrané nástroje sme testovali na vzorke 48 viet z rôznych článkov
                    <footnote id="__FN2__">
                        <para>
Vety boli vyberané z článkov na portáloch: https://www.topky.sk/, https://sportky.zoznam.sk/, https://dromedar.zoznam.sk/, https://hiking.sk/, http://www.reny.sk/ a http://www.slovakiasite.com/sk/rieky.php
                        </para>
                    </footnote>
. Tieto vety obsahovali dokopy 123 entít, z toho 55 slovenských obcí, 27 vrchov, 21 riek a 20 iných entít. Z nástrojov pre slovenčinu sme testovali 
                    <citation>3</citation>
 a NLP4SK, nástroj 
                    <citation>2</citation>
 sa nám nepodarilo použiť. Pre porovnanie sme testovali aj nástroj NameTag, určený pre český jazyk. Za správne určenú entitu sme považovali takú, ktorá mala správne určený rozsah aj typ.
                </para>
                <table>
                    <title>
Porovnanie úspešnosti jednotlivých existujúcich nástrojov
                    </title>
                    <tgroup cols="4">
                        <colspec colname="c1" colwidth="25*"/>
                        <colspec colname="c2" colwidth="25*"/>
                        <colspec colname="c3" colwidth="25*"/>
                        <colspec colname="c4" colwidth="25*"/>
                        <tbody valign="top">
                            <row>
                                <entry>
                                    <para>
                                        <emphasis role="bold">
Nástroj 
                                        </emphasis>
(autor)
                                    </para>
                                </entry>
                                <entry>
                                    <para>
                                        <emphasis role="bold">
Presnosť
                                        </emphasis>
                                    </para>
                                </entry>
                                <entry>
                                    <para>
                                        <emphasis role="bold">
Úplnosť
                                        </emphasis>
                                    </para>
                                </entry>
                                <entry>
                                    <para>
                                        <emphasis role="bold">
F-skóre
                                        </emphasis>
                                    </para>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <para>
Filip Bednárik
                                    </para>
                                </entry>
                                <entry>
                                    <para>
12,23%
                                    </para>
                                </entry>
                                <entry>
                                    <para>
13,82%
                                    </para>
                                </entry>
                                <entry>
                                    <para>
12,98%
                                    </para>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <para>
NameTag
                                    </para>
                                </entry>
                                <entry>
                                    <para>
52,44%
                                    </para>
                                </entry>
                                <entry>
                                    <para>
34,96%
                                    </para>
                                </entry>
                                <entry>
                                    <para>
41,95%
                                    </para>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <para>
NLP4SK
                                    </para>
                                </entry>
                                <entry>
                                    <para>
87,5%
                                    </para>
                                </entry>
                                <entry>
                                    <para>
68,29%
                                    </para>
                                </entry>
                                <entry>
                                    <para>
76,71%
                                    </para>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <para>
Z výsledkov testovania nástrojov vyplýva, že nad doménou geografických názvov najlepšie pracuje nástroj NLP4SK. Nástroj 
                    <citation>3</citation>
 často označoval ako entity slová, ktoré nimi neboli, väčšinou začiatky viet – pravdepodobne kvôli veľkým písmenám. Častým problémom bolo aj označenie správneho slova, no určenie nesprávneho typu entity – väčšina slov bola označená ako osoba. Ďalším problémom bolo označovanie miest ako súdov, čo je pravdepodobne spôsobené zameraním nástroja na oblasť súdnictva. V niekoľkých prípadoch nástroj správne určil typ, no rozsah nie, napríklad postupnosť názvov miest oddelených čiarkami označil ako jednu adresu. Nástroj NameTag často označoval geografické názvy ako mená osôb. Problém mal s vrchmi aj menej známymi obcami. Nižšia úspešnosť tohto nástroja sa dala predpokladať, nakoľko bol navrhnutý pre češtinu, ktorá má mierne odlišné pravidlá skloňovania, čo mohlo byť jednou z príčin neúspechu pri vyskloňovaných názvoch. Relatívne vysoká úspešnosť nástroja NLP4SK bola spôsobená aj tým, že v prípadoch, keď nájdená entita môže patriť do viacerých kategórií, nástroj vráti všetky. Pri testovaní sme za správne označenú entitu považovali tú, ktorá mala medzi vrátenými kategóriami tú správnu. Text použitý pri testovaní nástrojov s označenými výstupmi jednotlivých nástrojov je v Prílohe B.
                </para>
            </section>
            <section>
                <title>
Knowledge Graph
                </title>
                <para>
Google Knowledge Graph
                    <footnote id="__FN3__">
                        <para>
https://developers.google.com/knowledge-graph/
                        </para>
                    </footnote>
 je grafová databáza vytvorená spoločnosťou Google za účelom zvýšenia kvality výsledkov vyhľadávania. Skladá sa z entít a vzťahov medzi nimi (znalostí). Počet entít, ktoré pozná sa pohybuje v stovkách miliónov, a počet znalostí rádovo v desiatkach miliárd
                    <footnote id="__FN4__">
                        <para>
https://googleblog.blogspot.com/2012/05/introducing-knowledge-graph-things-not.html
                        </para>
                    </footnote>
. Medzi tieto entity patria aj slovenské obce, rieky a vrchy. Táto technológia však nie je navrhnutá priamo na určenie entít v texte, ale na vyhľadanie konkrétnej entity, určenie jej typu a iných informácií o nej. Pri použití Knowledge Graph-u by sme teda rovnako museli predspracovať text, keďže napriek podpore slovenských entít ich dokáže správne vyhľadať iba podľa základného tvaru. Môže sa však hodiť pri validácii navrhnutého riešenia. Spoločnosť Google taktiež ponúka metódy na spracovanie prirodzeného jazyka, okrem iného aj na extrakciu pomenovaných entít, no tieto v súčasnosti slovenčinu nepodporujú
                    <footnote id="__FN5__">
                        <para>
https://cloud.google.com/natural-language/docs/languages
                        </para>
                    </footnote>
.  
                </para>
            </section>
            <section>
                <title>
Open Street Map
                </title>
                <para>
Pre doménu geografických entít sa zdá byť vhodné použitie mapových dát. Projekt Open Street Map (OSM)
                    <footnote id="__FN6__">
                        <para>
https://www.openstreetmap.org/about
                        </para>
                    </footnote>
 je jeden z možných zdrojov takýchto dát. Jedná sa o komunitný projekt zameraný na vytváranie a údržbu mapových podkladov po celom svete. Tieto dáta sú voľne dostupné pod licenciou Open Data Commons Open Database License
                    <footnote id="__FN7__">
                        <para>
https://opendatacommons.org/licenses/odbl/
                        </para>
                    </footnote>
. Dáta z OSM obsahujú okrem vrchov, obcí a riek aj mnoho iných entít, ako sú napríklad ulice, pamiatky, vodné plochy, ale aj inštitúcie, zastávky hromadnej dopravy či reštaurácie, a mnohé iné objekty, ktoré môžu byť zakreslené do mapy. Okrem samotného názvu sa priamo z týchto dát dajú získať aj iné informácie, ako je poloha, nadmorská výška alebo počet obyvateľov mesta.
                </para>
            </section>
            <section>
                <title>
Osm2pgsql
                </title>
                <para>
Dáta z OSM je možné jednoducho importovať do relačnej databázy.
                    <footnote id="__FN8__">
                        <para>
https://wiki.openstreetmap.org/wiki/Osm2pgsql
                        </para>
                    </footnote>
 Po importovaní dát získame v databáze šesť tabuliek. Najdôležitejšie mapové dáta sú uložené v tabuľkách planet_osm_line, _point, _polygon a _roads. V príslušných tabuľkách sú uložené objekty, ktoré by na mape boli vykreslené ako čiary, body a polygóny. Tabuľka planet_osm_roads obsahuje dáta z ostatných tabuliek. Pre nás sú dôležité tabuľky planet_osm_line a planet_osm_point, keďže rieky sú vykresľované ako čiary a vrchy aj obce ako body. Obe tabuľky majú 69 stĺpcov s rôznymi údajmi o jednotlivých objektoch. Pre nás sú dôležité nasledujúce stĺpce:
                </para>
                <itemizedlist>
                    <listitem>
                        <para>
name – pri vyhľadávaní entít najdôležitejší atribút – názov objektu.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
place – v tabuľke _point. Určuje typ obydlia, resp. obývanej oblasti. Pri hľadaní obcí sa hľadajú záznamy, ktoré majú v tomto stĺpci jednu z hodnôt „village“, „town“ alebo „city“.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
natural – v tabuľke _point. Určuje typ prírodného úkazu. Pri hľadaní vrchov sa hľadajú záznamy s hodnotou „peak“ v tomto stĺpci
                        </para>
                    </listitem>
                    <listitem>
                        <para>
waterway – v tabuľke _line. Určuje typ vodného toku. Pri hľadaní riek sa hľadajú záznamy s hodnotou „river“ v tomto stĺpci.
                        </para>
                    </listitem>
                </itemizedlist>
            </section>
        </section>
    </chapter>
    <chapter>
        <title>
Špecifikácia riešenia
        </title>
        <para>
Cieľom našej práce je implementovať vlastnú aplikáciu na rozpoznávanie pomenovaných entít v texte v slovenskom jazyku a zistiť, či môže byť pri rozpoznávaní pomenovaných entít byť nápomocná ich poloha v reálnom svete. Navrhovaná metóda sa bude sústrediť na geografické entity, konkrétne obce, vrchy a rieky v Slovenskej Republike. Obce bude schopná určiť podľa názvu, ale aj podľa skratky na EČV, prípadne opisného názvu (napríklad slovné spojenie „mesto pod Urpínom“ označujúce Banskú Bystricu). Metóda bude entity určovať jednoznačne, teda každú z nájdených entít zaradí do jednej kategórie. Na vstupe aplikácia dostane text v slovenskom jazyku, pričom predpokladáme, že tento text je neobsahuje gramatické chyby ani preklepy. Na výstupe vráti aplikácia zoznam všetkých entít, ktoré sa v texte vyskytujú a pôvodný text s označenými entitami. Úspešnosť navrhovanej metódy plánujeme porovnať s existujúcimi nástrojmi. Pokiaľ je nám známe, súčasné nástroje nevyužívajú reálnu polohu geografických entít. Preto plánujeme implementovať aj prístup, ktorý polohu entít využívať bude, a porovnať úspešnosť takéhoto prístupu s čisto lingvistickým prístupom.
        </para>
        <section>
            <title>
Prototyp
            </title>
            <para>
Aplikáciu sme sa rozhodli vytvoriť v programovacom jazyku Python. Prvý prototyp aplikácie najprv pomocou webového lematizéra 
                <citation>3</citation>
 predspracuje vstupný text. Následne sa text spracováva po vetách. Pre každé slovo sa najprv overí, či sa začína veľkým písmenom. Pokiaľ áno, označí sa toto slovo ako možný začiatok entity – kandidát. K názvu takto vytvoreného kandidátova sa pridajú aj všetky nasledujúce slová začínajúce veľkým písmenom.
            </para>
            <para>
Postup práce prototypu
            </para>
            <para>
Pokiaľ  sa za postupnosťou slov začínajúcich veľkými písmenami nachádza predložka a ďalšie slovo začínajúce veľkým písmenom, pridá sa k názvu aj toto. Každý kandidát má tiež v sebe uložené 3 slová v okolí názvu – kontext. Slová, ktoré už boli v jednom názve použité sa do iných názvov nedostanú. Keď sa takto vytypujú všetci kandidáti, porovnávajú sa ich názvy so slovníkmi obcí, riek a vrchov. Názov, ktorý sa vyhľadáva v databáze sa vyskladá z lem slov z názvu kandidáta, okrem slov za predložkami, ktoré ostávajú v pôvodnom tvare.  V prípade, že sa nájde práve jedna zhoda, na základe daného kandidáta sa vytvorí entita príslušného typu a uloží sa medzi nájdené entity. Pokiaľ nastane zhoda vo viacerých kategóriách, kontroluje sa kontext. Typ sa určí podľa kontextových slov pred názvom (slová ako rieka, mesto, obec a podobne). Viacnásobná zhoda v rámci kategórie zatiaľ nie je ošetrená.
            </para>
            <figure>
                <title>
Proces vytipovania kandidátov
                </title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="BP-NER-Pilnan_files/image2.png" contentwidth="601" contentdepth="257"/>
                    </imageobject>
                </mediaobject>
            </figure>
            <figure>
                <title>
Odvodzovanie názvu pre dopyt do slovníka
                </title>
                <blockquote>
                    <para>
Výstupom je zoznam nájdených entít so základnými informáciami o nich. Do prototypu bude nutné pridať kvalitnejšie predspracovanie (napríklad použitie stemera v prípadoch keď sa nenájde lema slova), kontrolu kratších názvov, pokiaľ sa nenájde zhoda s viacslovným názvom (napríklad v situácii, keď názov entity začína na druhom slove vety sa zhoda nenájde, pretože aplikácia navrhne ako kandidáta na jednu entitu začiatok vety spolu s akýmikoľvek nasledujúcimi slovami začínajúcimi veľkým písmenom). Taktiež bude potrebné ošetriť prípady viacnásobnej zhody v jednej kategórii a prípad, keď nebude možné určiť typ entity na základe kontextu. V týchto prípadoch plánujeme využiť dovtedy nájdené entity a geografickú vzdialenosť novej entity od nich (brať sa bude najbližšia možnosť).
                        <inlinemediaobject>
                            <imageobject>
                                <imagedata fileref="BP-NER-Pilnan_files/image3.png" contentwidth="601" contentdepth="212"/>
                            </imageobject>
                        </inlinemediaobject>
                    </para>
                </blockquote>
            </figure>
            <figure>
                <title>
Určenie typu entity
                </title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="BP-NER-Pilnan_files/image4.png" contentwidth="601" contentdepth="327"/>
                    </imageobject>
                </mediaobject>
            </figure>
            <para>
Prípad, kedy sa nenájde žiadna zhoda plánujeme v budúcnosti riešiť ďalším spracovaním textu. Tento prípad totiž môže nastať z dôvodu nedostatočných schopností použitého lematizéra. Preto môžeme v takýchto prípadoch slová v názve, ktorých lema sa rovná ich pôvodnému tvaru, spracovať pre ďalší dopyt do databázy napríklad odrezaním určitého počtu znakov z konca slova a nahradiť tieto znaky wildcard znakom. Z takto získaných výsledkov môžeme vybrať najlepšiu zhodu na základe porovnania podobnosti názvov z databázy s pôvodným názvom v texte.
            </para>
        </section>
        <section>
            <title>
Hodnotenie úspešnosti
            </title>
            <para>
Vyhodnocovanie úspešnosti navrhnutej metódy budeme realizovať pomocou F-skóre, čo je v oblasti rozpoznávania pomenovaných entít štandardnou metrikou. Pri meraniach týchto hodnôt použijeme ručne anotované texty. Keďže nám pôjde o jednoznačnosť určenia typu entity, pri porovnávaní budeme penalizovať výsledky, ktoré určia kategóriu nejednoznačne. Teda pokiaľ nástroj vráti pre jednu entitu viacero možných typov, bude sa takýto výsledok rátať iba ako čiastočná zhoda.
            </para>
        </section>
    </chapter>
    <chapter>
        <title>
Použitá literatúra
        </title>
        <bibliolist>
            <bibliomixed>
            <abbrev>1</abbrev>
Named entities in Czech: annotating data and developing NE tagger. ŠEVČÍKOVÁ, Magda, ŽABOKRTSKÝ, Zdeněk a KRUZA, Oldřich. 2007. International Conference on Text, Speech and Dialogue. s. 188-195.
            </bibliomixed>
            <bibliomixed><abbrev>2</abbrev>
KAŠŠÁK, Ondrej. Extrakcia pomenovaných entít zo slovenského textu. 2012.
            </bibliomixed>
            <bibliomixed><abbrev>3</abbrev>
BEDNÁRIK, Filip. Extrakcia informácií z textu. Fakulta Informatiky a Informačných Technológií STU v Bratislave. 2016. Master's thesis.
            </bibliomixed>
            <bibliomixed><abbrev>4</abbrev>
KRÁL, Pavel. Features for named entity recognition in czech. s.l. : KEOD, 2011.
            </bibliomixed>
            <bibliomixed><abbrev>5</abbrev>
CRF-based Czech named entity recognizer and consolidation of Czech NER research. KONKOL, Michal a KONOPÍK, Miloslav. 2013. International Conference on Text, Speech and Dialogue. s. 153-160.
            </bibliomixed>
            <bibliomixed><abbrev>6</abbrev>
Czech named entity corpus and SVM-based recognizer. KRAVALOVÁ, Jana a ŽABOKRTSKÝ, Zdeněk. 2009. Proceedings of the 2009 Named Entities Workshop: Shared Task on Transliteration. s. 194-201.
            </bibliomixed>
            <bibliomixed><abbrev>7</abbrev>
A new state-of-the-art czech named entity recognizer. STRAKOVÁ, Jana, STRAKA, Milan a HAJIČ, Jan. 2013. International Conference on Text, Speech and Dialogue. s. 68-75.
            </bibliomixed>
            <bibliomixed><abbrev>8</abbrev>
Maximum entropy named entity recognition for Czech language. KONKOL, Michal a KONOPÍK, Miloslav. 2011. International Conference on Text, Speech and Dialogue. s. 203-210.
            </bibliomixed>
            <bibliomixed><abbrev>9</abbrev>
Incorporating non-local information into information extraction systems by gibbs sampling. FINKEL, Jenny Rose, GRENAGER, Trond a MANNING, Christopher. 2005. Proceedings of the 43rd annual meeting on association for computational linguistics. s. 363-370.
            </bibliomixed>
            <bibliomixed><abbrev>10</abbrev>
Conditional random fields: Probabilistic models for segmenting and labeling sequence data. LAFFERTY, John, MCCALLUM, Andrew a PEREIRA, Fernando C. N. 2001.
            </bibliomixed>
            <bibliomixed><abbrev>11</abbrev>
A maximum entropy approach to natural language processing. BERGER, Adam L., PIETRA, Vincent J. Della a PIETRA, Stephen A. Della. s.l. : MIT Press, 1996, Computational linguistics, Zv. 22, s. 39-71.
            </bibliomixed>
            <bibliomixed><abbrev>12</abbrev>
The viterbi algorithm. FORNEY, G. David. s.l. : IEEE, 1973, Proceedings of the IEEE, Zv. 61, s. 268-278.
            </bibliomixed>
            <bibliomixed><abbrev>13</abbrev>
Support vector machines. MOORE, Andrew W. 2001, Tutorial. School of Computer Science of the Carnegie Mellon University. Available at http://www. cs. cmu. edu/ ̃ awm/tutorials.Accessed August 16, 2009.
            </bibliomixed>
            <bibliomixed><abbrev>14</abbrev>
The truth of the F-measure. SASAKI, Yutaka a others. 2007, Teach Tutor mater, Zv. 1, s. 1-5.
            </bibliomixed>
            <bibliomixed><abbrev>15</abbrev>
MUC-4 evaluation metrics. CHINCHOR, Nancy. 1992. Proceedings of the 4th conference on Message understanding. s. 22-29.
            </bibliomixed>
            <div xmlns="http://www.w3.org/1999/xhtml" class="role-footnotes">
                <div class="role-footnote" id="__FN1__">
                    <p>
http://arl6.library.sk/nlp4sk/
                    </p>
                </div>
                <div class="role-footnote" id="__FN2__">
                    <p>
Vety boli vyberané z článkov na portáloch: https://www.topky.sk/, https://sportky.zoznam.sk/, https://dromedar.zoznam.sk/, https://hiking.sk/, http://www.reny.sk/ a http://www.slovakiasite.com/sk/rieky.php
                    </p>
                </div>
                <div class="role-footnote" id="__FN3__">
                    <p>
https://developers.google.com/knowledge-graph/
                    </p>
                </div>
                <div class="role-footnote" id="__FN4__">
                    <p>
https://googleblog.blogspot.com/2012/05/introducing-knowledge-graph-things-not.html
                    </p>
                </div>
                <div class="role-footnote" id="__FN5__">
                    <p>
https://cloud.google.com/natural-language/docs/languages
                    </p>
                </div>
                <div class="role-footnote" id="__FN6__">
                    <p>
https://www.openstreetmap.org/about
                    </p>
                </div>
                <div class="role-footnote" id="__FN7__">
                    <p>
https://opendatacommons.org/licenses/odbl/
                    </p>
                </div>
                <div class="role-footnote" id="__FN8__">
                    <p>
https://wiki.openstreetmap.org/wiki/Osm2pgsql
                    </p>
                </div>
            </div>
        </bibliolist>
    </chapter>
</book>
